<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gerador de T√≠tulos de Roupas</title>
  <style>
    body {
      font-family: Helvetica, Arial, sans-serif;
      background: #f7f2ef; 
      padding: 30px;
      color: #4b3226; 
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .container {
      background: #f0e6db; 
      padding: 25px 30px;
      border-radius: 12px;
      max-width: 600px;
      margin: 30px auto;
      box-shadow: 0 4px 12px rgba(75, 50, 38, 0.15);
      border: 1.5px solid #a87c63; 
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    h2, h3 {
      color: #6f4e37; 
      font-weight: 700;
      margin-bottom: 18px;
      font-family: Helvetica, Arial, sans-serif;
      transition: color 0.3s ease;
    }

    label {
      margin-top: 18px;
      display: block;
      font-weight: 600;
      font-size: 0.9rem;
      color: #5a3e2b;
      font-family: Helvetica, Arial, sans-serif;
      transition: color 0.3s ease;
    }

    input[type="text"], input[type="password"], select {
      width: 100%;
      padding: 12px 16px;
      margin-top: 8px;
      border-radius: 8px;
      border: 1.8px solid #a87c63;
      background: #fff9f4;
      font-size: 1rem;
      font-family: Helvetica, Arial, sans-serif;
      color: #4b3226;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, color 0.3s ease;
      box-sizing: border-box;
      outline-offset: 2px;
    }

    input[type="text"]:focus, input[type="password"]:focus, select:focus {
      border-color: #7a5230;
      box-shadow: 0 0 6px #b89375;
      background: #fff8f0;
    }

    button {
      width: 100%;
      padding: 14px;
      margin-top: 15px;
      border-radius: 8px;
      border: none;
      background: #7a5230;
      color: #f0e6db;
      font-weight: 700;
      font-size: 1.05rem;
      cursor: pointer;
      font-family: Helvetica, Arial, sans-serif;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      box-shadow: 0 3px 6px rgba(122, 82, 48, 0.6);
    }

    button:hover {
      background: #593a1e;
      box-shadow: 0 4px 10px rgba(89, 58, 30, 0.8);
    }

    .output {
      margin-top: 20px;
      background: #f9f4ee; 
      padding: 14px 18px;
      border-radius: 8px;
      border: 1.5px solid #a87c63;
      white-space: pre-line;
      font-family: Helvetica, Arial, sans-serif;
      color: #4b3226;
      min-height: 50px;
      box-sizing: border-box;
      transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    }

    small.note {
      display: block;
      margin-top: 8px;
      color: #6a4f3f;
      font-size: 0.85rem;
    }

    hr {
      margin: 40px 0;
      border: 0;
      border-top: 1.5px solid #c9b59a;
      transition: border-color 0.3s ease;
    }

    /* === Modo Escuro === */
    body.dark-mode {
      background: #1e1e1e;
      color: #ddd6cc;
    }

    body.dark-mode .container {
      background: #2b2b2b;
      border-color: #5a4b3c;
      box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
    }

    body.dark-mode h2, body.dark-mode h3 {
      color: #c8b8a6;
    }

    body.dark-mode label {
      color: #c0b3a0;
    }

    body.dark-mode input[type="text"], body.dark-mode select, body.dark-mode input[type="password"] {
      background: #3a3a3a;
      border-color: #5a4b3c;
      color: #ddd6cc;
    }

    body.dark-mode input[type="text"]:focus, body.dark-mode select:focus {
      border-color: #a2856f;
      background: #4a4a4a;
      box-shadow: 0 0 6px #a2856f;
    }

    body.dark-mode button {
      background: #a2856f;
      color: #2b2b2b;
      box-shadow: 0 3px 6px rgba(162, 133, 111, 0.8);
    }

    body.dark-mode button:hover {
      background: #7f6a52;
      box-shadow: 0 4px 10px rgba(127, 106, 82, 0.9);
    }

    body.dark-mode .output {
      background: #3a3a3a;
      border-color: #5a4b3c;
      color: #ddd6cc;
    }

    body.dark-mode hr {
      border-top-color: #5a4b3c;
    }

    /* Bot√£o modo escuro */
    #darkModeToggle {
      width: auto;
      padding: 8px 16px;
      margin-bottom: 20px;
      border-radius: 8px;
      background: #7a5230;
      color: #f0e6db;
      font-weight: 700;
      cursor: pointer;
      border: none;
      transition: background-color 0.3s ease;
      font-family: Helvetica, Arial, sans-serif;
      box-shadow: 0 3px 6px rgba(122, 82, 48, 0.6);
    }

    #darkModeToggle:hover {
      background: #593a1e;
      box-shadow: 0 4px 10px rgba(89, 58, 30, 0.8);
    }

/* Estilo para os campos de input da calculadora */
#markupCalc, #custoCalc {
    width: 50%;
    padding: 15px 10px;      /* menor padding */
    margin-top: 10px;
    margin-bottom: 12px;    /* ligeiramente menor */
    border-radius: 8px;     /* um pouco menor */
    border: 1.5px solid #a47148;
    background-color: #fdf5eb;
    color: #5a3e2b;
    font-size: 0.95rem;     /* texto um pouco menor */
    font-weight: 500;
    transition: 0.3s;
}

#markupCalc:focus, #custoCalc:focus {
    outline: none;
    border-color: #b9835b;
    box-shadow: 0 0 4px #b9835b;  /* ligeiramente menor */
    background-color: #fff7ec;
}

  </style>
</head>
<body>

<!-- Bot√£o para alternar modo escuro -->
<button id="darkModeToggle">Modo Escuro</button>

<!-- Section 1: Gerador de T√≠tulos Pai/Filho e C√≥digos -->
<div class="container" id="section1">
  <h2>Gerador de T√≠tulos para Roupas (Pai, Filho e C√≥digo)</h2>

  <input type="text" id="categoria" placeholder="Categoria (ex: SAIA)">
  <input type="text" id="comprimento" placeholder="Comprimento / Modelagem (opcional)">
  <input type="text" id="tecido" placeholder="Tecido (ex: ALFAIATARIA)">
  <input type="text" id="cor" placeholder="Cor (ex: PRETO)">
  <input type="text" id="marca" placeholder="Marca (ex: LEKAZIS)">

  <label for="gradeInicio">Grade Inicial:</label>
  <select id="gradeInicio">
    <option value="XPP">XPP</option>
    <option value="PP">PP</option>
    <option value="P">P</option>
    <option value="M">M</option>
    <option value="G">G</option>
    <option value="GG">GG</option>
    <option value="G1">G1</option>
    <option value="G2">G2</option>
    <option value="G3">G3</option>
    <option value="G4">G4</option>
    <option value="34">34</option>
    <option value="36">36</option>
    <option value="38">38</option>
    <option value="40">40</option>
    <option value="42">42</option>
    <option value="44">44</option>
    <option value="46">46</option>
    <option value="48">48</option>
    <option value="50">50</option>
    <option value="52">52</option>
  </select>

  <label for="gradeFim">Grade Final:</label>
  <select id="gradeFim">
    <option value="XPP">XPP</option>
    <option value="PP">PP</option>
    <option value="P">P</option>
    <option value="M">M</option>
    <option value="G">G</option>
    <option value="GG">GG</option>
    <option value="G1">G1</option>
    <option value="G2">G2</option>
    <option value="G3">G3</option>
    <option value="G4">G4</option>
    <option value="34">34</option>
    <option value="36">36</option>
    <option value="38">38</option>
    <option value="40">40</option>
    <option value="42">42</option>
    <option value="44">44</option>
    <option value="46">46</option>
    <option value="48">48</option>
    <option value="50">50</option>
    <option value="52">52</option>
  </select>

  <button onclick="gerarPaiEFilhos()">Gerar T√≠tulo Pai e Filhos</button>

  <div class="output" id="tituloOutput"></div>
  <button onclick="copiarTexto('tituloOutput')">Copiar T√≠tulo</button>

  <hr>

  <h3>Gerador de C√≥digo</h3>
  <input type="text" id="codigoManual" placeholder="C√≥digo da Pe√ßa (ex: SA006VD)">
  <button onclick="gerarCodigo()">Gerar C√≥digo Pai e Filhos</button>

  <div class="output" id="codigoOutput"></div>
  <button onclick="copiarTexto('codigoOutput')">Copiar C√≥digo</button>

</div>

<!-- Section 2: Gerador de T√≠tulo Completo com Final Escolhido e Meta Description -->
<div class="container" id="section2">
  <h2>Gerador de T√≠tulo Completo + Meta Description</h2>

  <input type="text" id="categoria2" placeholder="Categoria (ex: SAIA)">
  <input type="text" id="comprimento2" placeholder="Comprimento / Modelagem (opcional)">
  <input type="text" id="tecido2" placeholder="Tecido (ex: ALFAIATARIA)">
  <input type="text" id="cor2" placeholder="Cor (ex: PRETO)">
  <input type="text" id="marca2" placeholder="Marca (ex: LEKAZIS)">

  <label for="finalTitulo">Selecione o final do t√≠tulo:</label>
  <select id="finalTitulo">
    <option value="QVestido - Moda Evang√©lica">QVestido - Moda Evang√©lica Feminina</option>
    <option value="QVestido - Moda Executiva Feminina" selected>QVestido - Moda Executiva Feminina</option>
  </select>

  <button onclick="gerarTituloCompleto()">Gerar T√≠tulo Completo</button>
  <div class="output" id="outputTitulo"></div>
  <button onclick="copiarTexto('outputTitulo')">Copiar T√≠tulo</button>

  <button onclick="gerarMetaDescription()">Gerar Meta Description</button>
  <div class="output" id="outputMetaTag"></div>
  <button onclick="copiarTexto('outputMetaTag')">Copiar Meta</button>

  <hr>

  <h3>Gerador de URL</h3>
  <button onclick="gerarURL()">Gerar URL</button>
  <div class="output" id="urlOutput"></div>
  <button onclick="copiarTexto('urlOutput')">Copiar URL</button>

</div>

<!-- Section 3: Gerador de Descri√ß√£o com ChatGPT -->
<div class="container" id="section3">
  <h2>Gerador de Descri√ß√£o com a Sofi üíõ</h2>

  <label for="openaiKey">OpenAI API Key:</label>
  <input type="password" id="openaiKey" placeholder="Cole sua chave aqui (ex: sk-...)">

  <label for="tituloDescricao">T√≠tulo do produto (pode colar o t√≠tulo gerado acima):</label>
  <input type="text" id="tituloDescricao" placeholder="Ex: SAIA MIDI EM ALFAIATARIA AVEL√É - DOCE MARIA">

  <label for="composicaoDescricao">Composi√ß√£o:</label>
  <input type="text" id="composicaoDescricao" placeholder="Ex: 96% viscose, 4% elastano">

  <button onclick="gerarDescricao()">Gerar Descri√ß√£o com a Sofi</button>

  <div class="output" id="descricaoOutput"></div>
  <button onclick="copiarTexto('descricaoOutput')">Copiar Descri√ß√£o</button>
</div>

<!-- Section 4: Calculadora de Markup -->
<div class="container" id="section4">
  <h2>Calculadora de Markup</h2>

  <label for="markup">Markup:</label>
  <input type="number" step="0.01" id="markupCalc" placeholder="Ex: 2.1" />

  <label for="custo">Pre√ßo de Custo (R$):</label>
  <input type="number" step="0.01" id="custoCalc" placeholder="Ex: 577.80" />

  <button onclick="calcularMarkup()">Calcular</button>
  <button onclick="limparCamposMarkup()">Limpar</button>
  <button onclick="copiarResultadoMarkup()">Copiar Resultado</button>

  <div class="output" id="resultadoCalc"></div>
</div>

<script>
  // === Modo escuro toggle ===
  const toggleBtn = document.getElementById('darkModeToggle');
  toggleBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
    toggleBtn.innerText = document.body.classList.contains('dark-mode') ? 'Modo Claro' : 'Modo Escuro';
  });

  const tamanhos = ["XPP", "PP", "P", "M", "G", "GG", "G1", "G2", "G3", "G4", "34", "36", "38", "40", "42", "44", "46", "48", "50", "52"];

  // Espelhamento de campos da Section 1 para Section 2
  function sincronizarCampos() {
    const mapeamento = [
      { origem: "categoria", destino: "categoria2" },
      { origem: "comprimento", destino: "comprimento2" },
      { origem: "tecido", destino: "tecido2" },
      { origem: "cor", destino: "cor2" },
      { origem: "marca", destino: "marca2" },
    ];

    mapeamento.forEach(par => {
      const origemEl = document.getElementById(par.origem);
      const destinoEl = document.getElementById(par.destino);
      origemEl.addEventListener('input', () => {
        destinoEl.value = origemEl.value;
      });
    });
  }

  sincronizarCampos();

  // Section 1 functions

function gerarPaiEFilhos() {
  // Campos
  const cat = document.getElementById("categoria").value.toUpperCase();
  const comp = document.getElementById("comprimento").value.toUpperCase();
  const tecido = document.getElementById("tecido").value.toUpperCase();
  const cor = document.getElementById("cor").value.toUpperCase();
  const marca = document.getElementById("marca").value.toUpperCase();
  const inicio = document.getElementById("gradeInicio").value.toUpperCase();
  const fim = document.getElementById("gradeFim").value.toUpperCase();

  const base = comp ? `${cat} ${comp}` : cat;
  const tituloPai = `${base} EM ${tecido} ${cor} - ${marca}`;

  const inicioIndex = tamanhos.indexOf(inicio);
  const fimIndex = tamanhos.indexOf(fim);

  if (inicioIndex === -1 || fimIndex === -1 || inicioIndex > fimIndex) {
    alert("Selecione uma grade v√°lida.");
    return;
  }

  // T√≠tulos filhos
  let titulosFilhos = [];
  for (let i = inicioIndex; i <= fimIndex; i++) {
    titulosFilhos.push(`${tituloPai} - ${tamanhos[i]}`);
  }

  // Atualiza output
  document.getElementById("tituloOutput").innerText = [tituloPai, ...titulosFilhos].join("\n");
  // Atualiza campo de descri√ß√£o
  document.getElementById("tituloDescricao").value = tituloPai;
}

  function gerarTituloPai() {
    const cat = document.getElementById("categoria").value.toUpperCase();
    const comp = document.getElementById("comprimento").value.toUpperCase();
    const tecido = document.getElementById("tecido").value.toUpperCase();
    const cor = document.getElementById("cor").value.toUpperCase();
    const marca = document.getElementById("marca").value.toUpperCase();

    const base = comp ? `${cat} ${comp}` : cat;
    const titulo = `${base} EM ${tecido} ${cor} - ${marca}`;

    document.getElementById("tituloOutput").innerText = titulo;
    // tamb√©m copia para o campo de descri√ß√£o para agilizar
    document.getElementById("tituloDescricao").value = titulo;
  }

  function gerarTituloFilho() {
    const cat = document.getElementById("categoria").value.toUpperCase();
    const comp = document.getElementById("comprimento").value.toUpperCase();
    const tecido = document.getElementById("tecido").value.toUpperCase();
    const cor = document.getElementById("cor").value.toUpperCase();
    const marca = document.getElementById("marca").value.toUpperCase();
    const inicio = document.getElementById("gradeInicio").value.toUpperCase();
    const fim = document.getElementById("gradeFim").value.toUpperCase();

    const base = comp ? `${cat} ${comp}` : cat;
    const tituloBase = `${base} EM ${tecido} ${cor} - ${marca}`;

    const inicioIndex = tamanhos.indexOf(inicio);
    const fimIndex = tamanhos.indexOf(fim);

    if (inicioIndex === -1 || fimIndex === -1 || inicioIndex > fimIndex) {
      alert("Selecione uma grade v√°lida.");
      return;
    }

    let titulos = [];
    for (let i = inicioIndex; i <= fimIndex; i++) {
      titulos.push(`${tituloBase} - ${tamanhos[i]}`);
    }

    document.getElementById("tituloOutput").innerText =  titulos.join("\n");
    // preenche o campo de descri√ß√£o com o primeiro t√≠tulo (facilita)
    document.getElementById("tituloDescricao").value = titulos[0] || "";
  }

  function gerarCodigo() {
    const codigoBase = document.getElementById("codigoManual").value.toUpperCase();
    const inicio = document.getElementById("gradeInicio").value.toUpperCase();
    const fim = document.getElementById("gradeFim").value.toUpperCase();

    const inicioIndex = tamanhos.indexOf(inicio);
    const fimIndex = tamanhos.indexOf(fim);

    if (!codigoBase) {
      alert("Digite o c√≥digo da pe√ßa.");
      return;
    }
    if (inicioIndex === -1 || fimIndex === -1 || inicioIndex > fimIndex) {
      alert("Selecione uma grade v√°lida.");
      return;
    }

    let codigos = [`${codigoBase}`];
    for (let i = inicioIndex; i <= fimIndex; i++) {
      codigos.push(`${codigoBase}-${tamanhos[i]}`);
    }

    document.getElementById("codigoOutput").innerText = codigos.join("\n");
  }

  // Section 2 functions
  function capitalizarTitulo(texto) {
    return texto
      .toLowerCase()
      .split(' ')
      .filter(Boolean)
      .map(palavra => palavra.charAt(0).toUpperCase() + palavra.slice(1))
      .join(' ');
  }

  function gerarTituloCompleto() {
    const cat = document.getElementById("categoria2").value.trim();
    const comp = document.getElementById("comprimento2").value.trim();
    const tecido = document.getElementById("tecido2").value.trim();
    const cor = document.getElementById("cor2").value.trim();
    const marca = document.getElementById("marca2").value.trim();
    const finalTitulo = document.getElementById("finalTitulo").value;

    const base = comp ? `${cat} ${comp}` : cat;
    const tituloBase = `${base} em ${tecido} ${cor} ${marca}`;

    const tituloCapitalizado = capitalizarTitulo(tituloBase);
    const tituloCompleto = `${tituloCapitalizado} ${finalTitulo}`;

    document.getElementById("outputTitulo").innerText = tituloCompleto;
  }

  async function gerarDescricao() {
  const key = document.getElementById('openaiKey').value.trim();
  const titulo = document.getElementById('tituloDescricao').value.trim().toUpperCase();
  const composicao = document.getElementById('composicaoDescricao').value.trim();
  const output = document.getElementById('descricaoOutput');

  if (!key) {
    alert("Cole sua OpenAI API Key no campo acima (somente no seu PC).");
    return;
  }
  if (!titulo) {
    alert("Preencha o t√≠tulo antes de gerar a descri√ß√£o.");
    return;
  }

  const compTexto = composicao ? `Composi√ß√£o: ${composicao}.` : "";

  output.innerText = "‚è≥ Gerando descri√ß√£o com a Sofi...";

  try {
    const response = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Authorization": `Bearer ${key}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: "gpt-4o-mini",
        messages: [
          {
            role: "system",
            content: "Voc√™ √© Sofi, assistente de Ecommerce que escreve descri√ß√µes detalhadas e persuasivas para roupas. Use um tom am√°vel e profissional, destaque caracter√≠sticas, benef√≠cios, caimento, ocasi√µes de uso e a composi√ß√£o se houver."
          },
          {
            role: "user",
            content: `Crie uma descri√ß√£o detalhada, persuasiva e objetiva para o produto: "${titulo}". ${compTexto} Inclua: 1) Uma frase de destaque curta; 2) Par√°grafo sobre tecido e conforto; 3) Par√°grafo sobre estilo/ocasi√£o; 4) Instru√ß√µes r√°pidas de cuidado (se poss√≠vel). Seja claro e comercial.`
          }
        ],
        max_tokens: 450,
        temperature: 0.7
      })
    });

    if (!response.ok) {
      const errText = await response.text();
      console.error("Erro OpenAI:", response.status, errText);
      output.innerText = "‚ùå Erro ao gerar descri√ß√£o. Verifique sua chave e conex√£o (veja console para detalhes).";
      return;
    }

    const data = await response.json();
    const mensagem = (data.choices && data.choices[0] && (data.choices[0].message?.content || data.choices[0].text)) || "Sem resposta.";
    output.innerText = mensagem.trim();
  } catch (err) {
    console.error(err);
    output.innerText = "‚ö†Ô∏è Erro ao conectar com a API. Verifique sua internet e a chave.";
  }
}

<script>
  function calcularMarkup() {
    const markup = parseFloat(document.getElementById("markupCalc").value);
    const custo = parseFloat(document.getElementById("custoCalc").value);

    if (isNaN(markup) || isNaN(custo) || markup <= 0 || custo <= 0) {
      document.getElementById("resultadoCalc").textContent = "Preencha valores v√°lidos.";
      return;
    }

    const bruto = custo * markup;
    const base = Math.floor(bruto / 10) * 10;
    const resto = bruto - base;

    let precoFinal;

    if (resto < 5) {
      precoFinal = base - 0.10;
    } else {
      precoFinal = base + 9.90;
    }

    document.getElementById("resultadoCalc").textContent = `${precoFinal.toLocaleString("pt-BR", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
  }

  function limparCamposMarkup() {
    document.getElementById("markupCalc").value = "";
    document.getElementById("custoCalc").value = "";
    document.getElementById("resultadoCalc").textContent = "";
  }

  function copiarResultadoMarkup() {
    const resultado = document.getElementById("resultadoCalc").textContent;
    if (resultado) {
      navigator.clipboard.writeText(resultado)
        .then(() => alert("Resultado copiado!"))
        .catch(() => alert("Erro ao copiar."));
    }
  }

  document.getElementById("marcaCalc").addEventListener("change", function () {
    const valor = this.value;
    if (valor) {
      document.getElementById("markupCalc").value = valor;
    }
  });
</script>

</script>

</body>
</html>
